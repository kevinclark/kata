Seems to work, despite crashing g++ in about 5 minutes.

nth_prime.hpp:17:   instantiated from ‘nth_prime_impl<23, 401>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<23, 399>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<24, 397>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<24, 395>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<24, 393>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<24, 391>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<25, 389>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<25, 387>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<25, 385>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<26, 383>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<26, 381>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<27, 379>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<27, 377>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<27, 375>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<28, 373>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<28, 371>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<28, 369>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<29, 367>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<29, 365>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<29, 363>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<29, 361>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<30, 359>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<30, 357>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<30, 355>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<31, 353>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<31, 351>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<32, 349>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<33, 347>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<33, 345>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<33, 343>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<33, 341>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<33, 339>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<34, 337>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<34, 335>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<34, 333>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 331>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 329>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 327>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 325>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 323>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 321>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<35, 319>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<36, 317>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<36, 315>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<37, 313>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<38, 311>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<38, 309>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 307>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 305>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 303>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 301>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 299>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 297>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<39, 295>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<40, 293>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<40, 291>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<40, 289>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<40, 287>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<40, 285>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<41, 283>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<42, 281>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<42, 279>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<43, 277>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<43, 275>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<43, 273>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<44, 271>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<45, 269>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<45, 267>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<45, 265>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<46, 263>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<46, 261>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<46, 259>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<47, 257>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<47, 255>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<47, 253>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<48, 251>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<48, 249>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<48, 247>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<48, 245>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<48, 243>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<49, 241>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<50, 239>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<50, 237>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<50, 235>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<51, 233>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<51, 231>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<52, 229>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<53, 227>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<53, 225>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 223>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 221>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 219>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 217>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 215>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<54, 213>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 211>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 209>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 207>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 205>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 203>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<55, 201>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<56, 199>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<57, 197>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<57, 195>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<58, 193>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<59, 191>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<59, 189>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<59, 187>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<59, 185>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<59, 183>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<60, 181>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<61, 179>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<61, 177>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<61, 175>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<62, 173>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<62, 171>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<62, 169>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<63, 167>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<63, 165>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<64, 163>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<64, 161>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<64, 159>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<65, 157>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<65, 155>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<65, 153>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<66, 151>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<67, 149>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<67, 147>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<67, 145>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<67, 143>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<67, 141>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<68, 139>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<69, 137>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<69, 135>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<69, 133>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<70, 131>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<70, 129>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 127>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 125>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 123>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 121>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 119>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 117>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<71, 115>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<72, 113>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<72, 111>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<73, 109>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<74, 107>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<74, 105>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<75, 103>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<76, 101>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<76, 99>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<77, 97>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<77, 95>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<77, 93>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<77, 91>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<78, 89>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<78, 87>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<78, 85>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<79, 83>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<79, 81>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<80, 79>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<80, 77>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<80, 75>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<81, 73>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<82, 71>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<82, 69>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<83, 67>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<83, 65>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<83, 63>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<84, 61>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<85, 59>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<85, 57>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<85, 55>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<86, 53>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<86, 51>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<86, 49>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<87, 47>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<87, 45>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<88, 43>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<89, 41>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<89, 39>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<90, 37>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<90, 35>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<90, 33>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<91, 31>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<92, 29>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<92, 27>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<92, 25>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<93, 23>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<93, 21>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<94, 19>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<95, 17>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<95, 15>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<96, 13>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<97, 11>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<97, 9>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<98, 7>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<99, 5>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<99, 3>’
nth_prime.hpp:25:   instantiated from ‘nth_prime_impl<100, 2>’
nth_prime.hpp:41:   instantiated from ‘nth_prime<100>’
main.cpp:13:   instantiated from here

is_prime.hpp:20: error: incomplete type ‘divides_by<401, 199>’ used in nested name specifier
i686-apple-darwin9-g++-4.0.1: Internal error: Segmentation fault (program cc1plus)
Please submit a full bug report.
See <URL:http://developer.apple.com/bugreporter> for instructions.
g++ -Wall -o main main.cpp  280.93s user 3.69s system 93% cpu 5:05.67 total
